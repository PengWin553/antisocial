<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="lib/comment.js" defer></script>
</head>
<body>
    <div>
    </div>
    <input type="text" id="sampletext">

    <div id="comment">
        <ul>
            <li v-for="item in items" :key="item.id">
                <label>{{ item.fullname }}</label>
                <p>{{ item.content }}</p>
                <a :href="'comment.html?post=' + item.post_id">Comment</a>
                <p class="border-b border-gray-300"></p>
            </li>
        </ul>
    </div>

    <div>
        <form id="commentme">
            <textarea name="" id="" cols="30" rows="10"></textarea>
            <button>Comment</button>
        </form>
    </div>

    <script>

        window.onload = function() {
          const urlParams = new URLSearchParams(window.location.search);
          const postId = urlParams.get('post');

          document.getElementById("sampletext").value = postId;
        
          if (postId) {
            const apiUrl = `https://api.example.com/data?post_id=${postId}`;
        
            fetch(apiUrl)
              .then(response => response.json())
              .then(data => {
                console.log(data);
              })
              .catch(error => {
                console.error('Error fetching data:', error);
              });
          } else {
            console.error('No post_id provided in the URL');
            location.href = "home.html";
          }
        };


        const userId = localStorage.getItem('user_id');
        document.getElementById("userid").value = userId;

        document.getElementById('commentme').addEventListener('submit', function(event) {
            event.preventDefault();
            const formData = new FormData(this);
            fetch('../api/content/post.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {

            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again later.');
            });
        });
    </script>
</body>
</html>